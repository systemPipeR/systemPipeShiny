<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Load tabular files as tibbles to server — loadDF • systemPipeShiny</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Load tabular files as tibbles to server — loadDF" />
<meta property="og:description" content="load a file to server end. It's designed to be used with a
input file source switch button.
It uses vroom::vroom to load the file. In SPS, this
function is usually combined as downstream of  dynamicFileServer()
function on on the server side to
read the file into R. This loading function only works for parsing
tabular data, use vroom::vroom() internally.
If no user data is uploaded, it will return the example dataset that is prepared
by the developer. If the developer does not provide the dataset either,
it will return a 8-row empty tibble." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">systemPipeShiny</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.41</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="https://systempipe.org/sps/">
    <span class="fa fa fa fa-home"></span>
     
    SPS Home
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/systemPipeR/systemPipeShiny/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Load tabular files as tibbles to server</h1>
    <small class="dont-index">Source: <a href='https://github.com/systemPipeR/systemPipeShiny/blob/master/R/spsServerCollections.R'><code>R/spsServerCollections.R</code></a></small>
    <div class="hidden name"><code>loadDF.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>load a file to server end. It's designed to be used with a
input file source switch button.
It uses <a href='https://vroom.r-lib.org/reference/vroom.html'>vroom::vroom</a> to load the file. In SPS, this
function is usually combined as downstream of  <code><a href='dynamicFile.html'>dynamicFileServer()</a></code>
function on on the server side to
read the file into R. This loading function only works for parsing
tabular data, use <code><a href='https://vroom.r-lib.org/reference/vroom.html'>vroom::vroom()</a></code> internally.</p>
<p>If no user data is uploaded, it will return the example dataset that is prepared
by the developer. If the developer does not provide the dataset either,
it will return a 8-row empty tibble.</p>
    </div>

    <pre class="usage"><span class='fu'>loadDF</span><span class='op'>(</span>
  <span class='va'>choice</span>,
  data_init <span class='op'>=</span> <span class='cn'>NULL</span>,
  upload_path <span class='op'>=</span> <span class='cn'>NULL</span>,
  eg_path <span class='op'>=</span> <span class='cn'>NULL</span>,
  comment <span class='op'>=</span> <span class='st'>"#"</span>,
  delim <span class='op'>=</span> <span class='st'>"\t"</span>,
  col_types <span class='op'>=</span> <span class='fu'>vroom</span><span class='fu'>::</span><span class='fu'><a href='https://vroom.r-lib.org/reference/cols.html'>cols</a></span><span class='op'>(</span><span class='op'>)</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>choice</th>
      <td><p>where this file comes from, one of 'upload' or example 'eg'?</p></td>
    </tr>
    <tr>
      <th>data_init</th>
      <td><p>a tibble to return if <code>upload_path</code> or <code>eg_path</code> is not
provided. Return a 8x8 empty tibble if not provided</p></td>
    </tr>
    <tr>
      <th>upload_path</th>
      <td><p>when <code>choice</code> is "upload", where to load the file, will
return <code>data_init</code> if this param is not provided</p></td>
    </tr>
    <tr>
      <th>eg_path</th>
      <td><p>when <code>choice</code> is "eg", where to load the file, will
return <code>data_init</code> if this param is not provided</p></td>
    </tr>
    <tr>
      <th>comment</th>
      <td><p>comment characters to parse the datafile,
see help file of <a href='https://vroom.r-lib.org/reference/vroom.html'>vroom::vroom</a></p></td>
    </tr>
    <tr>
      <th>delim</th>
      <td><p>delimiter characters to parse the data file,
see help file of <a href='https://vroom.r-lib.org/reference/vroom.html'>vroom::vroom</a></p></td>
    </tr>
    <tr>
      <th>col_types</th>
      <td><p>columns specifications, see help file of <a href='https://vroom.r-lib.org/reference/vroom.html'>vroom::vroom</a></p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>other params for vroom, see help file of <a href='https://vroom.r-lib.org/reference/vroom.html'>vroom::vroom</a></p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>returns a tibble and <code>NULL</code> if parsing fails</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This is function is wrapped by the <code>shinyCatch()</code> function, so it
will show loading information both on console and on UI. This function
prevents loading file errors to crash the Shiny app, so any kind of file upload will not
crash the app. To show message on UI, <code>spsDepend("toastr")</code> must be used in Shiny UI
function, see examples.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
  <span class='co'># change value to 'local' to see the difference</span>
  <span class='fu'>spsOption</span><span class='op'>(</span><span class='st'>"mode"</span>, value <span class='op'>=</span> <span class='st'>"server"</span><span class='op'>)</span>
  <span class='va'>ui</span> <span class='op'>&lt;-</span> <span class='fu'>fluidPage</span><span class='op'>(</span>
    <span class='fu'>spsDepend</span><span class='op'>(</span><span class='st'>"toastr"</span><span class='op'>)</span>,
    <span class='fu'>radioButtons</span><span class='op'>(</span>
      <span class='st'>"data_source"</span>, <span class='st'>"Choose your data file source:"</span>,
      <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Upload"</span> <span class='op'>=</span> <span class='st'>"upload"</span>, <span class='st'>"Example"</span> <span class='op'>=</span> <span class='st'>"eg"</span><span class='op'>)</span>,
      selected <span class='op'>=</span> <span class='st'>"eg"</span>
    <span class='op'>)</span>,
    <span class='fu'><a href='dynamicFile.html'>dynamicFile</a></span><span class='op'>(</span><span class='st'>"data_path"</span>, label <span class='op'>=</span> <span class='st'>"input file"</span><span class='op'>)</span>,
    <span class='fu'>dataTableOutput</span><span class='op'>(</span><span class='st'>"df"</span><span class='op'>)</span>
  <span class='op'>)</span>

  <span class='va'>server</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>input</span>, <span class='va'>output</span>, <span class='va'>session</span><span class='op'>)</span> <span class='op'>{</span>
    <span class='va'>tmp_file</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span><span class='op'>(</span>fileext <span class='op'>=</span> <span class='st'>".csv"</span><span class='op'>)</span>
    <span class='fu'><a href='https://rdrr.io/r/utils/write.table.html'>write.csv</a></span><span class='op'>(</span><span class='va'>iris</span>, file <span class='op'>=</span> <span class='va'>tmp_file</span><span class='op'>)</span>
    <span class='va'>upload_path</span> <span class='op'>&lt;-</span> <span class='fu'><a href='dynamicFile.html'>dynamicFileServer</a></span><span class='op'>(</span><span class='va'>input</span>, <span class='va'>session</span>, <span class='st'>"data_path"</span><span class='op'>)</span>
    <span class='va'>data_df</span> <span class='op'>&lt;-</span> <span class='fu'>reactive</span><span class='op'>(</span><span class='op'>{</span>
      <span class='fu'>loadDF</span><span class='op'>(</span>choice <span class='op'>=</span> <span class='va'>input</span><span class='op'>$</span><span class='va'>data_source</span>,
             upload_path <span class='op'>=</span> <span class='fu'>upload_path</span><span class='op'>(</span><span class='op'>)</span><span class='op'>$</span><span class='va'>datapath</span>,
             delim <span class='op'>=</span> <span class='st'>","</span>, eg_path <span class='op'>=</span> <span class='va'>tmp_file</span><span class='op'>)</span>
    <span class='op'>}</span><span class='op'>)</span>
    <span class='va'>output</span><span class='op'>$</span><span class='va'>df</span> <span class='op'>&lt;-</span> <span class='fu'>renderDataTable</span><span class='op'>(</span><span class='fu'>data_df</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
  <span class='op'>}</span>
  <span class='fu'>shinyApp</span><span class='op'>(</span><span class='va'>ui</span>, <span class='va'>server</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://lezhang.me/'>Le Zhang</a>, <a href='https://www.dcassol.com/'>Daniela Cassol</a>, <a href='https://github.com/mathrj'>Ponmathi Ramasamy</a>, <a href='https://github.com/jianhaizhang'>Jianhai Zhang</a>, <a href='https://github.com/gdmosher'>Gordon Mosher</a>, <a href='http://girke.bioinformatics.ucr.edu/'>Thomas Girke</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


