<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Load tabular files as tibbles to server — loadDF • systemPipeShiny</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Load tabular files as tibbles to server — loadDF" />
<meta property="og:description" content="load a file to server end. It's designed to be used with the
input file source switch button(see it in a SPS new template data tab).
It uses vroom::vroom to load the file. In SPS, this
function is usually combined as downstream of  dynamicFileServer()
function on on the server side to
read the file into R. This loading function only works for parsing
tabular data, use vroom::vroom() internally." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">systemPipeShiny</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.99.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/systemPipeShiny.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/systemPipeR/systemPipeShiny/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Load tabular files as tibbles to server</h1>
    <small class="dont-index">Source: <a href='https://github.com/systemPipeR/systemPipeShiny/blob/master/R/spsCoreServer.R'><code>R/spsCoreServer.R</code></a></small>
    <div class="hidden name"><code>loadDF.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>load a file to server end. It's designed to be used with the
input file source switch button(see it in a SPS new template data tab).
It uses <a href='https://vroom.r-lib.org/reference/vroom.html'>vroom::vroom</a> to load the file. In SPS, this
function is usually combined as downstream of  <code><a href='dynamicFileServer.html'>dynamicFileServer()</a></code>
function on on the server side to
read the file into R. This loading function only works for parsing
tabular data, use <code><a href='https://vroom.r-lib.org/reference/vroom.html'>vroom::vroom()</a></code> internally.</p>
    </div>

    <pre class="usage"><span class='fu'>loadDF</span>(
  <span class='no'>choice</span>,
  <span class='kw'>data_init</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>upload_path</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>eg_path</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>comment</span> <span class='kw'>=</span> <span class='st'>"#"</span>,
  <span class='kw'>delim</span> <span class='kw'>=</span> <span class='st'>"\t"</span>,
  <span class='kw'>col_types</span> <span class='kw'>=</span> <span class='kw pkg'>vroom</span><span class='kw ns'>::</span><span class='fu'><a href='https://vroom.r-lib.org/reference/cols.html'>cols</a></span>(),
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>choice</th>
      <td><p>where this file comes from, from 'upload' or example 'eg'?</p></td>
    </tr>
    <tr>
      <th>data_init</th>
      <td><p>a tibble to return if <code>upload_path</code> or <code>eg_path</code> is not
provided. Return a 8x8 empty tibble if not provided</p></td>
    </tr>
    <tr>
      <th>upload_path</th>
      <td><p>when <code>choice</code> is "upload", where to load the file, will
return <code>data_init</code> if this param is not provided</p></td>
    </tr>
    <tr>
      <th>eg_path</th>
      <td><p>when <code>choice</code> is "eg", where to load the file, will
return <code>data_init</code> if this param is not provided</p></td>
    </tr>
    <tr>
      <th>comment</th>
      <td><p>comment characters when load the file,
see help file of <code>vroom</code></p></td>
    </tr>
    <tr>
      <th>delim</th>
      <td><p>delimiter characters when load the file,
see help file of <code>vroom</code></p></td>
    </tr>
    <tr>
      <th>col_types</th>
      <td><p>columns specifications, see help file of <code>vroom</code></p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>other params for vroom, see help file of <code>vroom</code></p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>returns a tibble or <code>NULL</code> if parsing is unsuccessful</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This is function is wrapped by the <code><a href='shinyCatch.html'>shinyCatch()</a></code> function, so it
will show loading information both on console and on UI. This function
prevents errors to crash the Shiny app, so any kind of file upload will not
crash the app. To show message on UI, <code><a href='useSps.html'>useSps()</a></code> must be used in Shiny UI
function, see examples.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span>(<span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span>()){
    <span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>shinyWidgets</span>)
    <span class='co'># change value to 'local' to see the difference</span>
    <span class='fu'><a href='spsOption.html'>spsOption</a></span>(<span class='st'>"mode"</span>, <span class='kw'>value</span> <span class='kw'>=</span> <span class='st'>"server"</span>)
    <span class='no'>ui</span> <span class='kw'>&lt;-</span> <span class='fu'>fluidPage</span>(
        <span class='fu'><a href='useSps.html'>useSps</a></span>(),
        <span class='kw pkg'>shinyWidgets</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/shinyWidgets/man/radioGroupButtons.html'>radioGroupButtons</a></span>(
            <span class='kw'>inputId</span> <span class='kw'>=</span> <span class='st'>"data_source"</span>, <span class='kw'>label</span> <span class='kw'>=</span> <span class='st'>"Choose your data file source:"</span>,
            <span class='kw'>selected</span> <span class='kw'>=</span> <span class='st'>"upload"</span>,
            <span class='kw'>choiceNames</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Upload"</span>, <span class='st'>"Example"</span>),
            <span class='kw'>choiceValues</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"upload"</span>, <span class='st'>"eg"</span>)
        ),
        <span class='fu'><a href='dynamicFile.html'>dynamicFile</a></span>(<span class='st'>"data_path"</span>, <span class='kw'>label</span> <span class='kw'>=</span> <span class='st'>"input file"</span>),
        <span class='fu'>dataTableOutput</span>(<span class='st'>"df"</span>)
    )

    <span class='no'>server</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>input</span>, <span class='no'>output</span>, <span class='no'>session</span>) {
        <span class='no'>tmp_file</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span>(<span class='kw'>fileext</span> <span class='kw'>=</span> <span class='st'>".csv"</span>)
        <span class='fu'><a href='https://rdrr.io/r/utils/write.table.html'>write.csv</a></span>(<span class='no'>iris</span>, <span class='kw'>file</span> <span class='kw'>=</span> <span class='no'>tmp_file</span>)
        <span class='no'>upload_path</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='dynamicFileServer.html'>dynamicFileServer</a></span>(<span class='no'>input</span>, <span class='no'>session</span>, <span class='st'>"data_path"</span>)
        <span class='no'>data_df</span> <span class='kw'>&lt;-</span> <span class='fu'>reactive</span>({
            <span class='fu'>loadDF</span>(<span class='kw'>choice</span> <span class='kw'>=</span> <span class='no'>input</span>$<span class='no'>data_source</span>,
                   <span class='kw'>upload_path</span> <span class='kw'>=</span> <span class='fu'>upload_path</span>()$<span class='no'>datapath</span>,
                   <span class='kw'>delim</span> <span class='kw'>=</span> <span class='st'>","</span>, <span class='kw'>eg_path</span> <span class='kw'>=</span> <span class='no'>tmp_file</span>)
        })
        <span class='no'>output</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'>renderDataTable</span>(<span class='fu'>data_df</span>())
    }
    <span class='fu'>shinyApp</span>(<span class='no'>ui</span>, <span class='no'>server</span>)
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://lezhang.me/'>Le Zhang</a>, <a href='https://www.dcassol.com/'>Daniela Cassol</a>, <a href='https://github.com/mathrj'>Ponmathi Ramasamy</a>, <a href='https://github.com/jianhaizhang'>Jianhai Zhang</a>, <a href='https://github.com/gdmosher'>Gordon Mosher</a>, <a href='http://girke.bioinformatics.ucr.edu/'>Thomas Girke</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


